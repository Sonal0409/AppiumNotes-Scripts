package appiumScripts;

import java.net.MalformedURLException;
import java.net.URL;
import java.time.Duration;
import java.util.List;

import org.openqa.selenium.Dimension;
import org.openqa.selenium.remote.DesiredCapabilities;
import org.testng.annotations.Test;

import io.appium.java_client.MobileElement;
import io.appium.java_client.TouchAction;
import io.appium.java_client.android.AndroidDriver;
import io.appium.java_client.touch.WaitOptions;
import io.appium.java_client.touch.offset.PointOption;

public class AndroidContacts {
	
	@Test
	public void RatingStarTest() throws MalformedURLException, InterruptedException
	{
		DesiredCapabilities cap = new DesiredCapabilities();
		cap.setCapability("deviceName", "may23");
		cap.setCapability("platformName", "ANDROID");
		cap.setCapability("platformVersion", "8.1.0");
		cap.setCapability("appPackage", "com.android.contacts");
		cap.setCapability("appActivity", "com.android.contacts.activities.PeopleActivity");
		AndroidDriver<MobileElement> driver= new AndroidDriver<MobileElement>(new URL("http://127.0.0.1:4723/wd/hub"),cap);
   
		 Dimension size = driver.manage().window().getSize();

	        for(int i=0;i<1;i++){
	            TouchAction t = new TouchAction(driver);
	            t.press(PointOption.point(size.width / 2, (int) (size.height * 0.8)))
	                    .waitAction(WaitOptions.waitOptions(Duration.ofMillis(2000)))
	                    .moveTo(PointOption.point(size.width / 2, (int) (size.height * 0.2)))
	                    .release()
	                    .perform();
	        }

		List<MobileElement> contacts= driver.findElementsByClassName("android.widget.TextView");
   
		int size1= contacts.size();
		System.out.println(size1);
   for(int i=0; i<size1;i++)
	{
	   
	   
		if(contacts.get(i).getText().equalsIgnoreCase("B1"))
		{
			System.out.println(contacts.get(i).getText());
			contacts.get(i).click();
			break;
		}
	}

   Thread.sleep(2000);
      driver.findElementsById("com.android.contacts:id/icon").get(0).click();
      
      Thread.sleep(10000);
      
  	TouchAction ta= new TouchAction(driver);
	
	ta.tap(PointOption.point(521, 1598)).perform();
	
		

}
	
}
